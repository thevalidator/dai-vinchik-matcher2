# Валидация действия
## Ошибка Validation required
В некоторых случаях ВКонтакте требует прохождения процедуры валидации пользователя, в результате чего начиная с версии API 5.0 (для более старых версий будет запрошена api/captcha-error) при любом запросе к API будет возвращена следующая ошибка:

> Код ошибки: 17 Текст ошибки: Validation required

В сообщении об ошибке передается также следующий параметр: redirect_uri — специально составленный адрес, который необходимо открыть в браузере для прохождения процедуры валидации.

После прохождения процедуры валидации пользователь будет перенаправлен на служебную страницу:

```
https://oauth.vk.com/blank.html#{Данные для завершения процедуры разблокировки}
```
В случае успешной валидации после # будут переданы:
```
https://oauth.vk.com/blank.html#success=1&access_token={НОВЫЙ ТОКЕН ПОЛЬЗОВАТЕЛЯ}&user_id={ИДЕНТИФИКАТОР ПОЛЬЗОВАТЕЛЯ}
```
В случае если токен был получен не по `https`-протоколу будет также передан новый `secret`.

В случае неуспешной разблокировки после # будут переданы:

```
https://oauth.vk.com/blank.html#fail=1
```
## Выполнение методов через окно подтверждения
Выполнение некоторых методов требует обязательного подтверждения со стороны пользователя.

### Вызов методов с помощью SDK или OpenAPI
При вызове методов с помощью ClientAPI, OpenAPI и SDK, окно подтверждения будет показано автоматически, никакие дополнительные действия со стороны разработчика не требуются. После нажатия на кнопку подтверждения метод будет выполнен. В случае отмены действия метод выполнен не будет, а в приложение вернется параметр `cancel=1`.


### Вызов методов напрямую
1. Вызвать метод, получить ответ вида
```JSON
{
  "error": {
    "error_code": 17,
    "error_msg": "Validation required: please open redirect_uri in browser",
    ...
    "redirect_uri": "..."
  }
}
```
2. Открыть браузер со страницей, полученной в `redirect_uri`.
3. В случае подтверждения действия пользователем будет возвращен параметр `success=1`, в случае отмены — `cancel=1`.
4. После подтверждения действия пользователем необходимо вызвать требуемый метод повторно и он будет выполнен.